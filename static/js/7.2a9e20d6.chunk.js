(this.webpackJsonpinstagram=this.webpackJsonpinstagram||[]).push([[7],{276:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"j",(function(){return i})),n.d(t,"i",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return m}));var r=n(49);async function s(e){return(await r.b.firestore().collection("users").where("username","==",e.toLowerCase()).get()).docs.length>0}async function a(e){return(await r.b.firestore().collection("users").where("username","==",e.toLowerCase()).get()).docs.map((e=>({...e.data(),docId:e.id})))}async function c(e){return(await r.b.firestore().collection("users").where("userId","==",e).get()).docs.map((e=>({...e.data(),docId:e.id})))}async function o(e,t){let n=r.b.firestore().collection("users");n=t.length>0?n.where("userId","not-in",[...t,e]):n.where("userId","!=",e);return(await n.limit(10).get()).docs.map((e=>({...e.data(),docId:e.id})))}async function i(e,t,n){return r.b.firestore().collection("users").doc(e).update({following:n?r.a.arrayRemove(t):r.a.arrayUnion(t)})}async function u(e,t,n){return r.b.firestore().collection("users").doc(e).update({followers:n?r.a.arrayRemove(t):r.a.arrayUnion(t)})}async function l(e,t){const n=(await r.b.firestore().collection("photos").where("userId","in",t).get()).docs.map((e=>({...e.data(),docId:e.id})));return await Promise.all(n.map((async t=>{let n=!1;t.likes.includes(e)&&(n=!0);const r=await c(t.userId),{username:s}=r[0];return{username:s,...t,userLikedPhoto:n}})))}async function d(e){return(await r.b.firestore().collection("photos").where("userId","==",e).get()).docs.map((e=>({...e.data(),docId:e.id})))}async function b(e,t){const n=await r.b.firestore().collection("users").where("username","==",e).where("following","array-contains",t).get(),[s={}]=n.docs.map((e=>({...e.data(),docId:e.id})));return s.userId}async function m(e,t,n,r,s){await i(t,r,e),await u(n,s,e)}},279:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="/images/avatars/default.png"},280:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1),s=n(276);function a(e){const[t,n]=Object(r.useState)();return Object(r.useEffect)((()=>{e&&async function(e){const[t]=await Object(s.d)(e);n(t||{})}(e)}),[e]),{user:t,setActiveUser:n}}},286:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(1),s=n(9),a=n(48),c=n(42),o=n(76),i=n(24),u=n(279),l=n(280),d=n(7);function b(){const{user:e}=Object(r.useContext)(o.a),{user:t}=Object(l.a)(null===e||void 0===e?void 0:e.uid),{firebase:n}=Object(r.useContext)(c.a),b=Object(s.g)();return Object(d.jsx)("header",{className:"h-16 bg-white border-b border-gray-primary mb-8",children:Object(d.jsx)("div",{className:"container mx-auto max-w-screen-lg h-full",children:Object(d.jsxs)("div",{className:"flex justify-between h-full",children:[Object(d.jsx)("div",{className:"text-gray-700 text-center flex items-center align-items cursor-pointer",children:Object(d.jsx)("h1",{className:"flex justify-center w-full",children:Object(d.jsx)(a.b,{to:i.a,"aria-label":"Instagram logo",children:Object(d.jsx)("img",{src:"/images/logo.png",alt:"Instagram",className:"mt-2 w-6/12"})})})}),Object(d.jsx)("div",{className:"text-gray-700 text-center flex items-center align-items",children:e?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(a.b,{to:i.a,"aria-label":"Dashboard",children:Object(d.jsx)("svg",{className:"w-8 mr-6 text-black-light cursor-pointer",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),Object(d.jsx)("button",{type:"button",title:"Sign Out",onClick:()=>{n.auth().signOut(),b.push(i.b)},onKeyDown:e=>{"Enter"===e.key&&(n.auth().signOut(),b.push(i.b))},children:Object(d.jsx)("svg",{className:"w-8 mr-6 text-black-light cursor-pointer",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),t&&Object(d.jsx)("div",{className:"flex items-center cursor-pointer",children:Object(d.jsx)(a.b,{to:"/p/".concat(null===t||void 0===t?void 0:t.username),children:Object(d.jsx)("img",{className:"rounded-full h-8 w-8 flex",src:"/images/avatars/".concat(null===t||void 0===t?void 0:t.username,".jpg"),alt:"".concat(null===t||void 0===t?void 0:t.username," profile"),onError:e=>{e.target.src=u.a}})})})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(a.b,{to:i.b,children:Object(d.jsx)("button",{type:"button",className:"bg-blue-medium font-bold text-sm rounded text-white w-20 h-8",children:"Log In"})}),Object(d.jsx)(a.b,{to:i.e,children:Object(d.jsx)("button",{type:"button",className:"font-bold text-sm rounded text-blue-medium w-20 h-8",children:"Sign Up"})})]})})]})})})}},308:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var r=n(1),s=n(286),a=n(7);function c(){return Object(r.useEffect)((()=>{document.title="Not Found - Instagram"}),[]),Object(a.jsxs)("div",{className:"bg-gray-background",children:[Object(a.jsx)(s.a,{}),Object(a.jsx)("div",{className:"mx-auto max-w-screen-lg",children:Object(a.jsx)("p",{className:"text-center text-2xl",children:"Not Found!"})})]})}}}]);
//# sourceMappingURL=7.2a9e20d6.chunk.js.map