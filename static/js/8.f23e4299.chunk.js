(this.webpackJsonpinstagram=this.webpackJsonpinstagram||[]).push([[8],{276:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"e",(function(){return s})),r.d(t,"d",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"j",(function(){return c})),r.d(t,"i",(function(){return u})),r.d(t,"b",(function(){return l})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return m})),r.d(t,"h",(function(){return b}));var a=r(49);async function n(e){return(await a.b.firestore().collection("users").where("username","==",e.toLowerCase()).get()).docs.length>0}async function s(e){return(await a.b.firestore().collection("users").where("username","==",e.toLowerCase()).get()).docs.map((e=>({...e.data(),docId:e.id})))}async function o(e){return(await a.b.firestore().collection("users").where("userId","==",e).get()).docs.map((e=>({...e.data(),docId:e.id})))}async function i(e,t){let r=a.b.firestore().collection("users");r=t.length>0?r.where("userId","not-in",[...t,e]):r.where("userId","!=",e);return(await r.limit(10).get()).docs.map((e=>({...e.data(),docId:e.id})))}async function c(e,t,r){return a.b.firestore().collection("users").doc(e).update({following:r?a.a.arrayRemove(t):a.a.arrayUnion(t)})}async function u(e,t,r){return a.b.firestore().collection("users").doc(e).update({followers:r?a.a.arrayRemove(t):a.a.arrayUnion(t)})}async function l(e,t){const r=(await a.b.firestore().collection("photos").where("userId","in",t).get()).docs.map((e=>({...e.data(),docId:e.id})));return await Promise.all(r.map((async t=>{let r=!1;t.likes.includes(e)&&(r=!0);const a=await o(t.userId),{username:n}=a[0];return{username:n,...t,userLikedPhoto:r}})))}async function d(e){return(await a.b.firestore().collection("photos").where("userId","==",e).get()).docs.map((e=>({...e.data(),docId:e.id})))}async function m(e,t){const r=await a.b.firestore().collection("users").where("username","==",e).where("following","array-contains",t).get(),[n={}]=r.docs.map((e=>({...e.data(),docId:e.id})));return n.userId}async function b(e,t,r,a,n){await c(t,a,e),await u(r,n,e)}},279:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r(1);function n(){const{innerWidth:e,innerHeight:t}=window;return{width:e,height:t}}function s(){const[e,t]=Object(a.useState)(n());return Object(a.useEffect)((()=>{function e(){t(n())}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),e}},307:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var a=r(1),n=r(9),s=r(48),o=r(42),i=r(24),c=r(276),u=r(279),l=r(6);function d(){const{height:e,width:t}=Object(u.a)(),r=Object(n.g)(),{firebase:d}=Object(a.useContext)(o.a),[m,b]=Object(a.useState)(""),[f,h]=Object(a.useState)(""),[w,p]=Object(a.useState)(""),[y,g]=Object(a.useState)(""),[j,x]=Object(a.useState)(""),O=""===y||""===w;return Object(a.useEffect)((()=>{document.title="Sign Up - Instagram"}),[]),Object(l.jsxs)("div",{className:"container flex mx-auto max-w-screen-md items-center justify-center h-screen",children:[t>1e3?Object(l.jsx)("div",{className:"flex w-3/5",children:Object(l.jsx)("img",{src:"./images/iphone-with-profile.jpg",alt:"iPhone with Instagram app"})}):null,Object(l.jsxs)("div",{className:"flex flex-col w-3/5 sm:w-2/5",children:[Object(l.jsxs)("div",{className:"flex flex-col items-center bg-white p-4 border border-gray-primary mb-4 rounded",children:[Object(l.jsx)("h1",{className:"flex justify-center w-full",children:Object(l.jsx)("img",{src:"./images/logo.png",alt:"Instagram",className:"mt-2 w-6/12 mb-4"})}),j&&Object(l.jsx)("p",{className:"mb-4 text-xs text-red-primary",children:j}),Object(l.jsxs)("form",{onSubmit:async e=>{e.preventDefault();if(await Object(c.a)(m))b(""),x("That username is already taken, please try another.");else try{const e=await d.auth().createUserWithEmailAndPassword(w,y);await e.user.updateProfile({displayName:m}),await d.firestore().collection("users").add({userId:e.user.uid,username:m.toLowerCase(),fullName:f,emailAddress:w.toLowerCase(),following:["2"],followers:[],dateCreated:Date.now()}),r.push(i.a)}catch(j){h(""),p(""),g(""),x(j.message)}},method:"POST",children:[Object(l.jsx)("input",{"aria-label":"Enter your username",type:"text",placeholder:"Username",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2",onChange:e=>{let{target:t}=e;return b(t.value)},value:m}),Object(l.jsx)("input",{"aria-label":"Enter your full name",type:"text",placeholder:"Full name",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2",onChange:e=>{let{target:t}=e;return h(t.value)},value:f}),Object(l.jsx)("input",{"aria-label":"Enter your email address",type:"text",placeholder:"Email address",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2",onChange:e=>{let{target:t}=e;return p(t.value)},value:w}),Object(l.jsx)("input",{"aria-label":"Enter your password",type:"password",placeholder:"Password",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2",onChange:e=>{let{target:t}=e;return g(t.value)},value:y}),Object(l.jsx)("button",{disabled:O,type:"submit",className:"bg-blue-medium text-white w-full rounded h-8 font-bold\n            ".concat(O&&"opacity-50"),children:"Sign Up"})]})]}),Object(l.jsx)("div",{className:"flex justify-center items-center flex-col w-full bg-white p-4 rounded border border-gray-primary",children:Object(l.jsxs)("p",{className:"text-sm",children:["Have an account?"," ",Object(l.jsx)(s.b,{to:i.b,className:"font-bold text-blue-medium",children:"Login"})]})})]})]})}}}]);
//# sourceMappingURL=8.f23e4299.chunk.js.map