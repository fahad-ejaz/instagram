{"version":3,"sources":["services/firebase.js","constants/paths.js","hooks/use-user.js","context/logged-in-user.js","components/header.js","components/post/header.js","components/post/image.js","components/post/actions.js","components/post/footer.js","components/post/add-comment.js","components/post/comments.js","components/post/index.js","components/timeline.js","hooks/use-photos.js","components/sidebar/user.js","components/sidebar/suggested-profile.js","components/sidebar/suggestions.js","components/sidebar/index.js","pages/dashboard.js"],"names":["async","doesUsernameExist","username","firebase","firestore","collection","where","toLowerCase","get","docs","length","getUserByUsername","map","item","data","docId","id","getUserByUserId","userId","getSuggestedProfiles","following","query","limit","user","updateLoggedInUserFollowing","loggedInUserDocId","profileId","isFollowingProfile","doc","update","FieldValue","arrayRemove","arrayUnion","updateFollowedUserFollowers","profileDocId","followers","getPhotos","userFollowedPhotos","photo","Promise","all","userLikedPhoto","likes","includes","getUserPhotosByUserId","isUserFollowingProfile","loggedInUserUsername","profileUserId","result","response","toggleFollow","activeUserDocId","followingUserId","DEFAULT_IMAGE_PATH","useUser","activeUser","setActiveUser","useState","useEffect","getUserObjByUserId","LoggedInUserContext","createContext","Header","loggedInUser","useContext","UserContext","uid","FirebaseContext","history","useHistory","_jsx","className","children","_jsxs","Link","to","ROUTES","src","alt","_Fragment","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","type","title","onClick","auth","signOut","push","onKeyDown","event","key","concat","onError","e","target","_ref","Image","caption","Actions","totalLikes","likedPhoto","handleFocus","toggleLiked","setToggleLiked","setLikes","handleToggleLiked","tabIndex","Footer","AddComment","comments","setComments","commentInput","comment","setComment","displayName","handleSubmitComment","preventDefault","method","onSubmit","autoComplete","name","placeholder","value","onChange","_ref2","ref","disabled","Comments","allComments","posted","commentsSlice","setCommentsSlice","showNextComments","slice","formatDistance","Date","Post","content","useRef","imageSrc","current","focus","dateCreated","Timeline","photos","setPhotos","_user$following","followedUserPhotos","sort","a","b","getTimelinePhotos","usePhotos","undefined","Skeleton","count","width","height","User","fullName","SuggestedProfile","followed","setFollowed","Suggestions","profiles","setProfiles","suggestedProfiles","profile","Sidebar","Dashboard","document","Provider"],"mappings":"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","file":"static/js/5.fcfbcbb4.chunk.js","sourcesContent":["import { firebase, FieldValue } from '../lib/firebase';\r\n\r\nexport async function doesUsernameExist(username) {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection('users')\r\n    .where('username', '==', username.toLowerCase())\r\n    .get();\r\n\r\n  return result.docs.length > 0;\r\n}\r\n\r\nexport async function getUserByUsername(username) {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection('users')\r\n    .where('username', '==', username.toLowerCase())\r\n    .get();\r\n\r\n  return result.docs.map((item) => ({\r\n    ...item.data(),\r\n    docId: item.id\r\n  }));\r\n}\r\n\r\n// get user from the firestore where userId === userId (passed from the auth)\r\nexport async function getUserByUserId(userId) {\r\n  const result = await firebase.firestore().collection('users').where('userId', '==', userId).get();\r\n  const user = result.docs.map((item) => ({\r\n    ...item.data(),\r\n    docId: item.id\r\n  }));\r\n\r\n  return user;\r\n}\r\n\r\n// check all conditions before limit results\r\nexport async function getSuggestedProfiles(userId, following) {\r\n  let query = firebase.firestore().collection('users');\r\n\r\n  if (following.length > 0) {\r\n    query = query.where('userId', 'not-in', [...following, userId]);\r\n  } else {\r\n    query = query.where('userId', '!=', userId);\r\n  }\r\n  const result = await query.limit(10).get();\r\n\r\n  const profiles = result.docs.map((user) => ({\r\n    ...user.data(),\r\n    docId: user.id\r\n  }));\r\n\r\n  return profiles;\r\n}\r\n\r\nexport async function updateLoggedInUserFollowing(\r\n  loggedInUserDocId, // currently logged in user document id (karl's profile)\r\n  profileId, // the user that karl requests to follow\r\n  isFollowingProfile // true/false (am i currently following this person?)\r\n) {\r\n  return firebase\r\n    .firestore()\r\n    .collection('users')\r\n    .doc(loggedInUserDocId)\r\n    .update({\r\n      following: isFollowingProfile ?\r\n        FieldValue.arrayRemove(profileId) :\r\n        FieldValue.arrayUnion(profileId)\r\n    });\r\n}\r\n\r\nexport async function updateFollowedUserFollowers(\r\n  profileDocId, // currently logged in user document id (karl's profile)\r\n  loggedInUserDocId, // the user that karl requests to follow\r\n  isFollowingProfile // true/false (am i currently following this person?)\r\n) {\r\n  return firebase\r\n    .firestore()\r\n    .collection('users')\r\n    .doc(profileDocId)\r\n    .update({\r\n      followers: isFollowingProfile ?\r\n        FieldValue.arrayRemove(loggedInUserDocId) :\r\n        FieldValue.arrayUnion(loggedInUserDocId)\r\n    });\r\n}\r\n\r\nexport async function getPhotos(userId, following) {\r\n  // [5,4,2] => following\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection('photos')\r\n    .where('userId', 'in', following)\r\n    .get();\r\n\r\n  const userFollowedPhotos = result.docs.map((photo) => ({\r\n    ...photo.data(),\r\n    docId: photo.id\r\n  }));\r\n\r\n  const photosWithUserDetails = await Promise.all(\r\n    userFollowedPhotos.map(async (photo) => {\r\n      let userLikedPhoto = false;\r\n      if (photo.likes.includes(userId)) {\r\n        userLikedPhoto = true;\r\n      }\r\n      // photo.userId = 2\r\n      const user = await getUserByUserId(photo.userId);\r\n      // raphael\r\n      const { username } = user[0];\r\n      return { username, ...photo, userLikedPhoto };\r\n    })\r\n  );\r\n\r\n  return photosWithUserDetails;\r\n}\r\n\r\nexport async function getUserPhotosByUserId(userId) {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection('photos')\r\n    .where('userId', '==', userId)\r\n    .get();\r\n\r\n  const photos = result.docs.map((photo) => ({\r\n    ...photo.data(),\r\n    docId: photo.id\r\n  }));\r\n  return photos;\r\n}\r\n\r\nexport async function isUserFollowingProfile(loggedInUserUsername, profileUserId) {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection('users')\r\n    .where('username', '==', loggedInUserUsername) // karl (active logged in user)\r\n    .where('following', 'array-contains', profileUserId)\r\n    .get();\r\n\r\n  const [response = {}] = result.docs.map((item) => ({\r\n    ...item.data(),\r\n    docId: item.id\r\n  }));\r\n\r\n  return response.userId;\r\n}\r\n\r\nexport async function toggleFollow(\r\n  isFollowingProfile,\r\n  activeUserDocId,\r\n  profileDocId,\r\n  profileUserId,\r\n  followingUserId\r\n) {\r\n  // 1st param: karl's doc id\r\n  // 2nd param: raphael's user id\r\n  // 3rd param: is the user following this profile? e.g. does karl follow raphael? (true/false)\r\n  await updateLoggedInUserFollowing(activeUserDocId, profileUserId, isFollowingProfile);\r\n\r\n  // 1st param: karl's user id\r\n  // 2nd param: raphael's doc id\r\n  // 3rd param: is the user following this profile? e.g. does karl follow raphael? (true/false)\r\n  await updateFollowedUserFollowers(profileDocId, followingUserId, isFollowingProfile);\r\n}\r\n","export const DEFAULT_IMAGE_PATH = '/images/avatars/default.png';\r\n","import { useState, useEffect } from 'react';\r\nimport { getUserByUserId } from '../services/firebase';\r\n\r\nexport default function useUser(userId) {\r\n  const [activeUser, setActiveUser] = useState();\r\n\r\n  useEffect(() => {\r\n    async function getUserObjByUserId(userId) {\r\n      const [user] = await getUserByUserId(userId);\r\n      setActiveUser(user || {});\r\n    }\r\n\r\n    if (userId) {\r\n      getUserObjByUserId(userId);\r\n    }\r\n  }, [userId]);\r\n\r\n  return { user: activeUser, setActiveUser };\r\n}\r\n","import { createContext } from 'react';\r\n\r\nconst LoggedInUserContext = createContext(null);\r\nexport default LoggedInUserContext;\r\n","import { useContext } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport FirebaseContext from '../context/firebase';\r\nimport UserContext from '../context/user';\r\nimport * as ROUTES from '../constants/routes';\r\nimport { DEFAULT_IMAGE_PATH } from '../constants/paths';\r\nimport useUser from '../hooks/use-user';\r\n\r\nexport default function Header() {\r\n  const { user: loggedInUser } = useContext(UserContext);\r\n  const { user } = useUser(loggedInUser?.uid);\r\n  const { firebase } = useContext(FirebaseContext);\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <header className=\"h-16 bg-white border-b border-gray-primary mb-8\">\r\n      <div className=\"container mx-auto max-w-screen-lg h-full\">\r\n        <div className=\"flex justify-between h-full\">\r\n          <div className=\"text-gray-700 text-center flex items-center align-items cursor-pointer\">\r\n            <h1 className=\"flex justify-center w-full\">\r\n              <Link to={ROUTES.DASHBOARD} aria-label=\"Instagram logo\">\r\n                <img src=\"/images/logo.png\" alt=\"Instagram\" className=\"mt-2 w-6/12\" />\r\n              </Link>\r\n            </h1>\r\n          </div>\r\n          <div className=\"text-gray-700 text-center flex items-center align-items\">\r\n            {loggedInUser ? (\r\n              <>\r\n                <Link to={ROUTES.DASHBOARD} aria-label=\"Dashboard\">\r\n                  <svg\r\n                    className=\"w-8 mr-6 text-black-light cursor-pointer\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    fill=\"none\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    stroke=\"currentColor\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2}\r\n                      d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\"\r\n                    />\r\n                  </svg>\r\n                </Link>\r\n\r\n                <button\r\n                  type=\"button\"\r\n                  title=\"Sign Out\"\r\n                  onClick={() => {\r\n                    firebase.auth().signOut();\r\n                    history.push(ROUTES.LOGIN);\r\n                  }}\r\n                  onKeyDown={(event) => {\r\n                    if (event.key === 'Enter') {\r\n                      firebase.auth().signOut();\r\n                      history.push(ROUTES.LOGIN);\r\n                    }\r\n                  }}\r\n                >\r\n                  <svg\r\n                    className=\"w-8 mr-6 text-black-light cursor-pointer\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    fill=\"none\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    stroke=\"currentColor\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2}\r\n                      d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"\r\n                    />\r\n                  </svg>\r\n                </button>\r\n                {user && (\r\n                  <div className=\"flex items-center cursor-pointer\">\r\n                    <Link to={`/p/${user?.username}`}>\r\n                      <img\r\n                        className=\"rounded-full h-8 w-8 flex\"\r\n                        src={`/images/avatars/${user?.username}.jpg`}\r\n                        alt={`${user?.username} profile`}\r\n                        onError={(e) => {\r\n                          e.target.src = DEFAULT_IMAGE_PATH;\r\n                        }}\r\n                      />\r\n                    </Link>\r\n                  </div>\r\n                )}\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Link to={ROUTES.LOGIN}>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"bg-blue-medium font-bold text-sm rounded text-white w-20 h-8\"\r\n                  >\r\n                    Log In\r\n                  </button>\r\n                </Link>\r\n                <Link to={ROUTES.SIGN_UP}>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"font-bold text-sm rounded text-blue-medium w-20 h-8\"\r\n                  >\r\n                    Sign Up\r\n                  </button>\r\n                </Link>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n","/* eslint-disable jsx-a11y/img-redundant-alt */\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default function Header({ username }) {\r\n  return (\r\n    <div className=\"flex border-b border-gray-primary h-4 p-4 py-8\">\r\n      <div className=\"flex items-center\">\r\n        <Link to={`/p/${username}`} className=\"flex items-center\">\r\n          <img\r\n            className=\"rounded-full h-8 w-8 flex mr-3\"\r\n            src={`/images/avatars/${username}.jpg`}\r\n            alt={`${username} profile picture`}\r\n          />\r\n          <p className=\"font-bold\">{username}</p>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nHeader.propTypes = {\r\n  username: PropTypes.string.isRequired\r\n};\r\n","import PropTypes from 'prop-types';\r\n\r\nexport default function Image({ src, caption }) {\r\n  return <img src={src} alt={caption} />;\r\n}\r\n\r\nImage.propTypes = {\r\n  src: PropTypes.string.isRequired,\r\n  caption: PropTypes.string.isRequired\r\n};\r\n","import { useState, useContext } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport FirebaseContext from '../../context/firebase';\r\nimport UserContext from '../../context/user';\r\n\r\nexport default function Actions({ docId, totalLikes, likedPhoto, handleFocus }) {\r\n  const {\r\n    user: { uid: userId }\r\n  } = useContext(UserContext);\r\n  const [toggleLiked, setToggleLiked] = useState(likedPhoto);\r\n  const [likes, setLikes] = useState(totalLikes);\r\n  const { firebase, FieldValue } = useContext(FirebaseContext);\r\n\r\n  const handleToggleLiked = async () => {\r\n    setToggleLiked((toggleLiked) => !toggleLiked);\r\n\r\n    await firebase\r\n      .firestore()\r\n      .collection('photos')\r\n      .doc(docId)\r\n      .update({\r\n        likes: toggleLiked ? FieldValue.arrayRemove(userId) : FieldValue.arrayUnion(userId)\r\n      });\r\n\r\n    setLikes((likes) => (toggleLiked ? likes - 1 : likes + 1));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex justify-between p-4\">\r\n        <div className=\"flex\">\r\n          <svg\r\n            onClick={handleToggleLiked}\r\n            onKeyDown={(event) => {\r\n              if (event.key === 'Enter') {\r\n                handleToggleLiked();\r\n              }\r\n            }}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n            tabIndex={0}\r\n            className={`w-8 mr-4 select-none cursor-pointer focus:outline-none ${\r\n              toggleLiked ? 'fill-red text-red-primary' : 'text-black-light'\r\n            }`}\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth={2}\r\n              d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\r\n            />\r\n          </svg>\r\n          <svg\r\n            onClick={handleFocus}\r\n            onKeyDown={(event) => {\r\n              if (event.key === 'Enter') {\r\n                handleFocus();\r\n              }\r\n            }}\r\n            className=\"w-8 text-black-light select-none cursor-pointer focus:outline-none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n            tabIndex={0}\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth={2}\r\n              d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\r\n            />\r\n          </svg>\r\n        </div>\r\n      </div>\r\n      <div className=\"p-4 py-0\">\r\n        <p className=\"font-bold\">{likes === 1 ? `${likes} like` : `${likes} likes`}</p>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nActions.propTypes = {\r\n  docId: PropTypes.string.isRequired,\r\n  totalLikes: PropTypes.number.isRequired,\r\n  likedPhoto: PropTypes.bool.isRequired,\r\n  handleFocus: PropTypes.func.isRequired\r\n};\r\n","import PropTypes from 'prop-types';\r\n\r\nexport default function Footer({ caption, username }) {\r\n  return (\r\n    <div className=\"p-4 pt-2 pb-1\">\r\n      <span className=\"mr-1 font-bold\">{username}</span>\r\n      <span className=\"italic\">{caption}</span>\r\n    </div>\r\n  );\r\n}\r\n\r\nFooter.propTypes = {\r\n  caption: PropTypes.string.isRequired,\r\n  username: PropTypes.string.isRequired\r\n};\r\n","import { useState, useContext } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport FirebaseContext from '../../context/firebase';\r\nimport UserContext from '../../context/user';\r\n\r\nexport default function AddComment({ docId, comments, setComments, commentInput }) {\r\n  const [comment, setComment] = useState('');\r\n  const { firebase, FieldValue } = useContext(FirebaseContext);\r\n  const {\r\n    user: { displayName }\r\n  } = useContext(UserContext);\r\n\r\n  const handleSubmitComment = (event) => {\r\n    event.preventDefault();\r\n\r\n    setComments([...comments, { displayName, comment }]);\r\n    setComment('');\r\n\r\n    return firebase\r\n      .firestore()\r\n      .collection('photos')\r\n      .doc(docId)\r\n      .update({\r\n        comments: FieldValue.arrayUnion({ displayName, comment })\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"border-t border-gray-primary\">\r\n      <form\r\n        className=\"flex justify-between pl-0 pr-5\"\r\n        method=\"POST\"\r\n        onSubmit={(event) =>\r\n          comment.length >= 1 ? handleSubmitComment(event) : event.preventDefault()\r\n        }\r\n      >\r\n        <input\r\n          aria-label=\"Add a comment\"\r\n          autoComplete=\"off\"\r\n          className=\"text-sm text-gray-base w-full mr-3 py-5 px-4\"\r\n          type=\"text\"\r\n          name=\"add-comment\"\r\n          placeholder=\"Add a comment...\"\r\n          value={comment}\r\n          onChange={({ target }) => setComment(target.value)}\r\n          ref={commentInput}\r\n        />\r\n        <button\r\n          className={`text-sm font-bold text-blue-medium ${!comment && 'opacity-25'}`}\r\n          type=\"button\"\r\n          disabled={comment.length < 1}\r\n          onClick={handleSubmitComment}\r\n        >\r\n          Post\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nAddComment.propTypes = {\r\n  docId: PropTypes.string.isRequired,\r\n  comments: PropTypes.array.isRequired,\r\n  setComments: PropTypes.func.isRequired,\r\n  commentInput: PropTypes.object\r\n};\r\n","import { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { formatDistance } from 'date-fns';\r\nimport { Link } from 'react-router-dom';\r\nimport AddComment from './add-comment';\r\n\r\nexport default function Comments({ docId, comments: allComments, posted, commentInput }) {\r\n  const [comments, setComments] = useState(allComments);\r\n  const [commentsSlice, setCommentsSlice] = useState(3);\r\n\r\n  const showNextComments = () => {\r\n    setCommentsSlice(commentsSlice + 3);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"p-4 pt-1 pb-4\">\r\n        {comments.slice(0, commentsSlice).map((item) => (\r\n          <p key={`${item.comment}-${item.displayName}`} className=\"mb-1\">\r\n            <Link to={`/p/${item.displayName}`}>\r\n              <span className=\"mr-1 font-bold\">{item.displayName}</span>\r\n            </Link>\r\n            <span>{item.comment}</span>\r\n          </p>\r\n        ))}\r\n        {comments.length >= 3 && commentsSlice < comments.length && (\r\n          <button\r\n            className=\"text-sm text-gray-base mb-1 cursor-pointer focus:outline-none\"\r\n            type=\"button\"\r\n            onClick={showNextComments}\r\n            onKeyDown={(event) => {\r\n              if (event.key === 'Enter') {\r\n                showNextComments();\r\n              }\r\n            }}\r\n          >\r\n            View more comments\r\n          </button>\r\n        )}\r\n        <p className=\"text-gray-base uppercase text-xs mt-2\">\r\n          {formatDistance(posted, new Date())} ago\r\n        </p>\r\n      </div>\r\n      <AddComment\r\n        docId={docId}\r\n        comments={comments}\r\n        setComments={setComments}\r\n        commentInput={commentInput}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nComments.propTypes = {\r\n  docId: PropTypes.string.isRequired,\r\n  comments: PropTypes.array.isRequired,\r\n  posted: PropTypes.number.isRequired,\r\n  commentInput: PropTypes.object.isRequired\r\n};\r\n","import { useRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Header from './header';\r\nimport Image from './image';\r\nimport Actions from './actions';\r\nimport Footer from './footer';\r\nimport Comments from './comments';\r\n\r\nexport default function Post({ content }) {\r\n  const commentInput = useRef(null);\r\n  const handleFocus = () => commentInput.current.focus();\r\n\r\n  // components\r\n  // -> header, image, actions (like & comment icons), footer, comments\r\n  return (\r\n    <div className=\"rounded col-span-4 border bg-white border-gray-primary mb-12\">\r\n      <Header username={content.username} />\r\n      <Image src={content.imageSrc} caption={content.caption} />\r\n      <Actions\r\n        docId={content.docId}\r\n        totalLikes={content.likes.length}\r\n        likedPhoto={content.userLikedPhoto}\r\n        handleFocus={handleFocus}\r\n      />\r\n      <Footer caption={content.caption} username={content.username} />\r\n      <Comments\r\n        docId={content.docId}\r\n        comments={content.comments}\r\n        posted={content.dateCreated}\r\n        commentInput={commentInput}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nPost.propTypes = {\r\n  content: PropTypes.shape({\r\n    username: PropTypes.string.isRequired,\r\n    imageSrc: PropTypes.string.isRequired,\r\n    caption: PropTypes.string.isRequired,\r\n    docId: PropTypes.string.isRequired,\r\n    userLikedPhoto: PropTypes.bool.isRequired,\r\n    likes: PropTypes.array.isRequired,\r\n    comments: PropTypes.array.isRequired,\r\n    dateCreated: PropTypes.number.isRequired\r\n  })\r\n};\r\n","/* eslint-disable no-nested-ternary */\r\nimport { useContext } from 'react';\r\nimport Skeleton from 'react-loading-skeleton';\r\nimport LoggedInUserContext from '../context/logged-in-user';\r\nimport usePhotos from '../hooks/use-photos';\r\nimport Post from './post';\r\n\r\nexport default function Timeline() {\r\n\r\n  const { user } = useContext(LoggedInUserContext);\r\n\r\n  const { user: { following } = {} } = useContext(\r\n    LoggedInUserContext\r\n  );\r\n\r\n  const { photos } = usePhotos(user);\r\n \r\n\r\n  return (\r\n    <div className=\"container col-span-2\">\r\n      {following===undefined ?(\r\n        <Skeleton count={2} width={640} height={500} className=\"mb-5\" />\r\n      ) : following.length===0 ?(\r\n        <p className=\"flex justify-center font-bold\">Follow other people to see Photos</p>\r\n      ) : photos? (\r\n       photos.map((content) => <Post key={content.docId} content={content} />)          \r\n      ) : null}\r\n\r\n      \r\n    </div>\r\n  );\r\n}\r\n\r\n","import { useState, useEffect } from 'react';\r\nimport { getPhotos } from '../services/firebase';\r\n\r\nexport default function usePhotos(user) {\r\n  const [photos, setPhotos] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function getTimelinePhotos() {\r\n      // does the user actually follow people?\r\n      if (user?.following?.length > 0) {\r\n        const followedUserPhotos = await getPhotos(user.userId, user.following);\r\n        // re-arrange array to be newest photos first by dateCreated\r\n        followedUserPhotos.sort((a, b) => b.dateCreated - a.dateCreated);\r\n        setPhotos(followedUserPhotos);\r\n      }\r\n    }\r\n\r\n    getTimelinePhotos();\r\n  }, [user?.userId, user?.following]);\r\n\r\n  return { photos };\r\n}\r\n","import PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\nimport Skeleton from 'react-loading-skeleton';\r\nimport { DEFAULT_IMAGE_PATH } from '../../constants/paths';\r\n\r\nexport default function User({ username, fullName }) {\r\n  return !username || !fullName ? (\r\n    <Skeleton count={1} height={61} />\r\n  ) : (\r\n    <Link to={`/p/${username}`} className=\"grid grid-cols-4 gap-4 mb-6 items-center\">\r\n      <div className=\"flex items-center justify-between col-span-1\">\r\n        <img\r\n          className=\"rounded-full w-16 flex mr-3\"\r\n          src={`/images/avatars/${username}.jpg`}\r\n          alt=\"\"\r\n          onError={(e) => {\r\n            e.target.src = DEFAULT_IMAGE_PATH;\r\n          }}\r\n        />\r\n      </div>\r\n      <div className=\"col-span-3\">\r\n        <p className=\"font-bold text-sm\">{username}</p>\r\n        <p className=\"text-sm\">{fullName}</p>\r\n      </div>\r\n    </Link>\r\n  );\r\n}\r\n\r\nUser.propTypes = {\r\n  username: PropTypes.string,\r\n  fullName: PropTypes.string\r\n};\r\n","import { useState, useContext } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\nimport {\r\n  updateLoggedInUserFollowing,\r\n  updateFollowedUserFollowers,\r\n  getUserByUserId\r\n} from '../../services/firebase';\r\nimport LoggedInUserContext from '../../context/logged-in-user';\r\n\r\nexport default function SuggestedProfile({\r\n  profileDocId,\r\n  username,\r\n  profileId,\r\n  userId,\r\n  loggedInUserDocId\r\n}) {\r\n  const [followed, setFollowed] = useState(false);\r\n  const { setActiveUser } = useContext(LoggedInUserContext);\r\n\r\n  async function handleFollowUser() {\r\n    setFollowed(true);\r\n    await updateLoggedInUserFollowing(loggedInUserDocId, profileId, false);\r\n    await updateFollowedUserFollowers(profileDocId, userId, false);\r\n    const [user] = await getUserByUserId(userId);\r\n    setActiveUser(user);\r\n  }\r\n\r\n  return !followed ? (\r\n    <div className=\"flex flex-row items-center align-items justify-between\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <img\r\n          className=\"rounded-full w-8 flex mr-3\"\r\n          src={`/images/avatars/${username}.jpg`}\r\n          alt=\"\"\r\n          onError={(e) => {\r\n            e.target.src = `/images/avatars/default.png`;\r\n          }}\r\n        />\r\n        <Link to={`/p/${username}`}>\r\n          <p className=\"font-bold text-sm\">{username}</p>\r\n        </Link>\r\n      </div>\r\n      <button\r\n        className=\"text-xs font-bold text-blue-medium\"\r\n        type=\"button\"\r\n        onClick={handleFollowUser}\r\n      >\r\n        Follow\r\n      </button>\r\n    </div>\r\n  ) : null;\r\n}\r\n\r\nSuggestedProfile.propTypes = {\r\n  profileDocId: PropTypes.string.isRequired,\r\n  username: PropTypes.string.isRequired,\r\n  profileId: PropTypes.string.isRequired,\r\n  userId: PropTypes.string.isRequired,\r\n  loggedInUserDocId: PropTypes.string.isRequired\r\n};\r\n","/* eslint-disable no-nested-ternary */\r\nimport { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Skeleton from 'react-loading-skeleton';\r\nimport { getSuggestedProfiles } from '../../services/firebase';\r\nimport SuggestedProfile from './suggested-profile';\r\n\r\nexport default function Suggestions({ userId, following, loggedInUserDocId }) {\r\n  const [profiles, setProfiles] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function suggestedProfiles() {\r\n      const response = await getSuggestedProfiles(userId, following);\r\n      setProfiles(response);\r\n    }\r\n\r\n    if (userId) {\r\n      suggestedProfiles();\r\n    }\r\n  }, [userId]);\r\n  // hint: use the firebase service (call using userId)\r\n  // getSuggestedProfiles\r\n  // call the async function ^^^^ within useEffect\r\n  // store it in state\r\n  // go ahead and render (wait on the profiles as in 'skeleton')\r\n\r\n  return !profiles ? (\r\n    <Skeleton count={1} height={150} className=\"mt-5\" />\r\n  ) : profiles.length > 0 ? (\r\n    <div className=\"rounded flex flex-col\">\r\n      <div className=\"text-sm flex items-center align-items justify-between mb-2\">\r\n        <p className=\"font-bold text-gray-base\">Suggestions for you</p>\r\n      </div>\r\n      <div className=\"mt-4 grid gap-5\">\r\n        {profiles.map((profile) => (\r\n          <SuggestedProfile\r\n            key={profile.docId}\r\n            profileDocId={profile.docId}\r\n            username={profile.username}\r\n            profileId={profile.userId}\r\n            userId={userId}\r\n            loggedInUserDocId={loggedInUserDocId}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  ) : null;\r\n}\r\n\r\nSuggestions.propTypes = {\r\n  userId: PropTypes.string,\r\n  following: PropTypes.array,\r\n  loggedInUserDocId: PropTypes.string\r\n};\r\n","import { useContext } from 'react';\r\nimport User from './user';\r\nimport Suggestions from './suggestions';\r\nimport LoggedInUserContext from '../../context/logged-in-user';\r\n\r\nexport default function Sidebar() {\r\n  const { user: { docId = '', fullName, username, userId, following } = {} } = useContext(\r\n    LoggedInUserContext\r\n  );\r\n\r\n  return (\r\n    <div className=\"p-4\">\r\n      <User username={username} fullName={fullName} />\r\n      <Suggestions userId={userId} following={following} loggedInUserDocId={docId} />\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Header from '../components/header';\r\nimport Timeline from '../components/timeline';\r\nimport Sidebar from '../components/sidebar';\r\nimport useUser from '../hooks/use-user';\r\nimport LoggedInUserContext from '../context/logged-in-user';\r\n\r\nexport default function Dashboard({ user: loggedInUser }) {\r\n  const { user, setActiveUser } = useUser(loggedInUser.uid);\r\n  useEffect(() => {\r\n    document.title = 'Instagram';\r\n  }, []);\r\n\r\n  return (\r\n    <LoggedInUserContext.Provider value={{ user, setActiveUser }}>\r\n      <div className=\"bg-gray-background\">\r\n        <Header />\r\n        <div className=\"grid grid-cols-3 gap-4 justify-between mx-auto max-w-screen-lg\">\r\n          <Timeline />\r\n          <Sidebar />\r\n        </div>\r\n      </div>\r\n    </LoggedInUserContext.Provider>\r\n  );\r\n}\r\n\r\nDashboard.propTypes = {\r\n  user: PropTypes.object.isRequired\r\n};\r\n"],"sourceRoot":""}