(this.webpackJsonpinstagram=this.webpackJsonpinstagram||[]).push([[9],{276:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"e",(function(){return n})),r.d(t,"d",(function(){return o})),r.d(t,"c",(function(){return c})),r.d(t,"j",(function(){return i})),r.d(t,"i",(function(){return l})),r.d(t,"b",(function(){return u})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return m})),r.d(t,"h",(function(){return b}));var a=r(49);async function s(e){return(await a.b.firestore().collection("users").where("username","==",e.toLowerCase()).get()).docs.length>0}async function n(e){return(await a.b.firestore().collection("users").where("username","==",e.toLowerCase()).get()).docs.map((e=>({...e.data(),docId:e.id})))}async function o(e){return(await a.b.firestore().collection("users").where("userId","==",e).get()).docs.map((e=>({...e.data(),docId:e.id})))}async function c(e,t){let r=a.b.firestore().collection("users");r=t.length>0?r.where("userId","not-in",[...t,e]):r.where("userId","!=",e);return(await r.limit(10).get()).docs.map((e=>({...e.data(),docId:e.id})))}async function i(e,t,r){return a.b.firestore().collection("users").doc(e).update({following:r?a.a.arrayRemove(t):a.a.arrayUnion(t)})}async function l(e,t,r){return a.b.firestore().collection("users").doc(e).update({followers:r?a.a.arrayRemove(t):a.a.arrayUnion(t)})}async function u(e,t){const r=(await a.b.firestore().collection("photos").where("userId","in",t).get()).docs.map((e=>({...e.data(),docId:e.id})));return await Promise.all(r.map((async t=>{let r=!1;t.likes.includes(e)&&(r=!0);const a=await o(t.userId),{username:s}=a[0];return{username:s,...t,userLikedPhoto:r}})))}async function d(e){return(await a.b.firestore().collection("photos").where("userId","==",e).get()).docs.map((e=>({...e.data(),docId:e.id})))}async function m(e,t){const r=await a.b.firestore().collection("users").where("username","==",e).where("following","array-contains",t).get(),[s={}]=r.docs.map((e=>({...e.data(),docId:e.id})));return s.userId}async function b(e,t,r,a,s){await i(t,a,e),await l(r,s,e)}},306:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var a=r(1),s=r(9),n=r(48),o=r(42),c=r(24),i=r(276),l=r(7);function u(){const e=Object(s.g)(),{firebase:t}=Object(a.useContext)(o.a),[r,u]=Object(a.useState)(""),[d,m]=Object(a.useState)(""),[b,f]=Object(a.useState)(""),[p,h]=Object(a.useState)(""),[w,y]=Object(a.useState)(""),g=""===p||""===b;return Object(a.useEffect)((()=>{document.title="Sign Up - Instagram"}),[]),Object(l.jsxs)("div",{className:"container flex mx-auto max-w-screen-md items-center h-screen",children:[Object(l.jsx)("div",{className:"flex w-3/5",children:Object(l.jsx)("img",{src:"/images/iphone-with-profile.jpg",alt:"iPhone with Instagram app"})}),Object(l.jsxs)("div",{className:"flex flex-col w-2/5",children:[Object(l.jsxs)("div",{className:"flex flex-col items-center bg-white p-4 border border-gray-primary mb-4 rounded",children:[Object(l.jsx)("h1",{className:"flex justify-center w-full",children:Object(l.jsx)("img",{src:"/images/logo.png",alt:"Instagram",className:"mt-2 w-6/12 mb-4"})}),w&&Object(l.jsx)("p",{className:"mb-4 text-xs text-red-primary",children:w}),Object(l.jsxs)("form",{onSubmit:async a=>{a.preventDefault();if(await Object(i.a)(r))u(""),y("That username is already taken, please try another.");else try{const a=await t.auth().createUserWithEmailAndPassword(b,p);await a.user.updateProfile({displayName:r}),await t.firestore().collection("users").add({userId:a.user.uid,username:r.toLowerCase(),fullName:d,emailAddress:b.toLowerCase(),following:["2"],followers:[],dateCreated:Date.now()}),e.push(c.a)}catch(w){m(""),f(""),h(""),y(w.message)}},method:"POST",children:[Object(l.jsx)("input",{"aria-label":"Enter your username",type:"text",placeholder:"Username",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2",onChange:e=>{let{target:t}=e;return u(t.value)},value:r}),Object(l.jsx)("input",{"aria-label":"Enter your full name",type:"text",placeholder:"Full name",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2",onChange:e=>{let{target:t}=e;return m(t.value)},value:d}),Object(l.jsx)("input",{"aria-label":"Enter your email address",type:"text",placeholder:"Email address",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2",onChange:e=>{let{target:t}=e;return f(t.value)},value:b}),Object(l.jsx)("input",{"aria-label":"Enter your password",type:"password",placeholder:"Password",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2",onChange:e=>{let{target:t}=e;return h(t.value)},value:p}),Object(l.jsx)("button",{disabled:g,type:"submit",className:"bg-blue-medium text-white w-full rounded h-8 font-bold\n            ".concat(g&&"opacity-50"),children:"Sign Up"})]})]}),Object(l.jsx)("div",{className:"flex justify-center items-center flex-col w-full bg-white p-4 rounded border border-gray-primary",children:Object(l.jsxs)("p",{className:"text-sm",children:["Have an account?"," ",Object(l.jsx)(n.b,{to:c.b,className:"font-bold text-blue-medium",children:"Login"})]})})]})]})}}}]);
//# sourceMappingURL=9.3988dad3.chunk.js.map