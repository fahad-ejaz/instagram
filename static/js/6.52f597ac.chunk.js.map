{"version":3,"sources":["services/firebase.js","constants/paths.js","hooks/use-user.js","context/logged-in-user.js","components/header.js","components/profilelist.js","components/overlay.js","components/profile/header.js","components/profile/photos.js","components/profile/index.js","pages/profile.js"],"names":["async","doesUsernameExist","username","firebase","firestore","collection","where","toLowerCase","get","docs","length","getUserByUsername","map","item","data","docId","id","getUserByUserId","userId","getSuggestedProfiles","following","query","limit","user","updateLoggedInUserFollowing","loggedInUserDocId","profileId","isFollowingProfile","doc","update","FieldValue","arrayRemove","arrayUnion","updateFollowedUserFollowers","profileDocId","followers","getPhotos","userFollowedPhotos","photo","Promise","all","userLikedPhoto","likes","includes","getUserPhotosByUserId","isUserFollowingProfile","loggedInUserUsername","profileUserId","result","response","toggleFollow","activeUserDocId","followingUserId","DEFAULT_IMAGE_PATH","useUser","activeUser","setActiveUser","useState","useEffect","getUserObjByUserId","LoggedInUserContext","createContext","Header","loggedInUser","useContext","UserContext","uid","FirebaseContext","history","useHistory","_jsx","className","children","_jsxs","Link","to","ROUTES","src","alt","_Fragment","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","type","title","onClick","auth","signOut","push","onKeyDown","event","key","concat","onError","e","target","ProfileList","_ref","profile","handleRemove","setOpen","open","text","handleClick","preventDefault","setTimeout","OverLay","handleUnFollowUser","handleRemoveFollowers","profiles","Transition","Root","show","as","Fragment","Dialog","onClose","Child","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","Panel","XMarkIcon","Title","_following","photosCount","followerCount","setFollowerCount","followingCount","setFollowingCount","fullName","profileUsername","setProfile","setUser","setIsFollowingProfile","activeBtnFollow","unFollowed","setUnFollowed","openOverLay","setOpenOverLay","overLayData","setOverLayData","getProfiles","userIds","old","handleOnClick","handleToggleFollow","isFollowing","isLoggedInUserFollowingProfile","cursor","Skeleton","circle","height","width","count","style","userSelect","userUpdated","followersUpdated","Photos","photos","imageSrc","caption","fillRule","clipRule","comments","Array","_","i","Profile","photosCollection","dispatch","useReducer","reducer","state","newState","getProfileInfoAndPhotos","useParams","checkUserExists","console","log","Provider","value","UserProfile"],"mappings":"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","file":"static/js/6.52f597ac.chunk.js","sourcesContent":["import { firebase, FieldValue } from '../lib/firebase';\r\n\r\nexport async function doesUsernameExist(username) {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection('users')\r\n    .where('username', '==', username.toLowerCase())\r\n    .get();\r\n\r\n  return result.docs.length > 0;\r\n}\r\n\r\nexport async function getUserByUsername(username) {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection('users')\r\n    .where('username', '==', username.toLowerCase())\r\n    .get();\r\n\r\n  return result.docs.map((item) => ({\r\n    ...item.data(),\r\n    docId: item.id\r\n  }));\r\n}\r\n\r\n// get user from the firestore where userId === userId (passed from the auth)\r\nexport async function getUserByUserId(userId) {\r\n  const result = await firebase.firestore().collection('users').where('userId', '==', userId).get();\r\n  const user = result.docs.map((item) => ({\r\n    ...item.data(),\r\n    docId: item.id\r\n  }));\r\n\r\n  return user;\r\n}\r\n\r\n// check all conditions before limit results\r\nexport async function getSuggestedProfiles(userId, following) {\r\n  let query = firebase.firestore().collection('users');\r\n\r\n  if (following.length > 0) {\r\n    query = query.where('userId', 'not-in', [...following, userId]);\r\n  } else {\r\n    query = query.where('userId', '!=', userId);\r\n  }\r\n  const result = await query.limit(10).get();\r\n\r\n  const profiles = result.docs.map((user) => ({\r\n    ...user.data(),\r\n    docId: user.id\r\n  }));\r\n\r\n  return profiles;\r\n}\r\n\r\nexport async function updateLoggedInUserFollowing(\r\n  loggedInUserDocId, // currently logged in user document id (karl's profile)\r\n  profileId, // the user that karl requests to follow\r\n  isFollowingProfile // true/false (am i currently following this person?)\r\n) {\r\n  return firebase\r\n    .firestore()\r\n    .collection('users')\r\n    .doc(loggedInUserDocId)\r\n    .update({\r\n      following: isFollowingProfile ?\r\n        FieldValue.arrayRemove(profileId) :\r\n        FieldValue.arrayUnion(profileId)\r\n    });\r\n}\r\n\r\nexport async function updateFollowedUserFollowers(\r\n  profileDocId, // currently logged in user document id (karl's profile)\r\n  loggedInUserDocId, // the user that karl requests to follow\r\n  isFollowingProfile // true/false (am i currently following this person?)\r\n) {\r\n  return firebase\r\n    .firestore()\r\n    .collection('users')\r\n    .doc(profileDocId)\r\n    .update({\r\n      followers: isFollowingProfile ?\r\n        FieldValue.arrayRemove(loggedInUserDocId) :\r\n        FieldValue.arrayUnion(loggedInUserDocId)\r\n    });\r\n}\r\n\r\nexport async function getPhotos(userId, following) {\r\n  // [5,4,2] => following\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection('photos')\r\n    .where('userId', 'in', following)\r\n    .get();\r\n\r\n  const userFollowedPhotos = result.docs.map((photo) => ({\r\n    ...photo.data(),\r\n    docId: photo.id\r\n  }));\r\n\r\n  const photosWithUserDetails = await Promise.all(\r\n    userFollowedPhotos.map(async (photo) => {\r\n      let userLikedPhoto = false;\r\n      if (photo.likes.includes(userId)) {\r\n        userLikedPhoto = true;\r\n      }\r\n      // photo.userId = 2\r\n      const user = await getUserByUserId(photo.userId);\r\n      // raphael\r\n      const { username } = user[0];\r\n      return { username, ...photo, userLikedPhoto };\r\n    })\r\n  );\r\n\r\n  return photosWithUserDetails;\r\n}\r\n\r\nexport async function getUserPhotosByUserId(userId) {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection('photos')\r\n    .where('userId', '==', userId)\r\n    .get();\r\n\r\n  const photos = result.docs.map((photo) => ({\r\n    ...photo.data(),\r\n    docId: photo.id\r\n  }));\r\n  return photos;\r\n}\r\n\r\nexport async function isUserFollowingProfile(loggedInUserUsername, profileUserId) {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection('users')\r\n    .where('username', '==', loggedInUserUsername) // karl (active logged in user)\r\n    .where('following', 'array-contains', profileUserId)\r\n    .get();\r\n\r\n  const [response = {}] = result.docs.map((item) => ({\r\n    ...item.data(),\r\n    docId: item.id\r\n  }));\r\n\r\n  return response.userId;\r\n}\r\n\r\nexport async function toggleFollow(\r\n  isFollowingProfile,\r\n  activeUserDocId,\r\n  profileDocId,\r\n  profileUserId,\r\n  followingUserId\r\n) {\r\n  // 1st param: karl's doc id\r\n  // 2nd param: raphael's user id\r\n  // 3rd param: is the user following this profile? e.g. does karl follow raphael? (true/false)\r\n  await updateLoggedInUserFollowing(activeUserDocId, profileUserId, isFollowingProfile);\r\n\r\n  // 1st param: karl's user id\r\n  // 2nd param: raphael's doc id\r\n  // 3rd param: is the user following this profile? e.g. does karl follow raphael? (true/false)\r\n  await updateFollowedUserFollowers(profileDocId, followingUserId, isFollowingProfile);\r\n}\r\n","export const DEFAULT_IMAGE_PATH = './images/avatars/default.png';\r\n","import { useState, useEffect } from 'react';\r\nimport { getUserByUserId } from '../services/firebase';\r\n\r\nexport default function useUser(userId) {\r\n  const [activeUser, setActiveUser] = useState();\r\n\r\n  useEffect(() => {\r\n    async function getUserObjByUserId(userId) {\r\n      const [user] = await getUserByUserId(userId);\r\n      setActiveUser(user || {});\r\n    }\r\n\r\n    if (userId) {\r\n      getUserObjByUserId(userId);\r\n    }\r\n  }, [userId]);\r\n\r\n  return { user: activeUser, setActiveUser };\r\n}\r\n","import { createContext } from 'react';\r\n\r\nconst LoggedInUserContext = createContext(null);\r\nexport default LoggedInUserContext;\r\n","import { useContext } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport FirebaseContext from '../context/firebase';\r\nimport UserContext from '../context/user';\r\nimport * as ROUTES from '../constants/routes';\r\nimport { DEFAULT_IMAGE_PATH } from '../constants/paths';\r\nimport useUser from '../hooks/use-user';\r\n\r\nexport default function Header() {\r\n  const { user: loggedInUser } = useContext(UserContext);\r\n  const { user } = useUser(loggedInUser?.uid);\r\n  const { firebase } = useContext(FirebaseContext);\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <header className=\"h-16 bg-white border-b border-gray-primary mb-8\">\r\n      <div className=\"container mx-auto max-w-screen-lg h-full\">\r\n        <div className=\"flex justify-between h-full\">\r\n          <div className=\"text-gray-700 text-center flex items-center align-items cursor-pointer\">\r\n            <h1 className=\"flex justify-center w-full\">\r\n              <Link to={ROUTES.DASHBOARD} aria-label=\"Instagram logo\">\r\n                <img src=\"./images/logo.png\" alt=\"Instagram\" className=\"mt-2 w-6/12\" />\r\n              </Link>\r\n            </h1>\r\n          </div>\r\n          <div className=\"text-gray-700 text-center flex items-center align-items\">\r\n            {loggedInUser ? (\r\n              <>\r\n                <Link to={ROUTES.DASHBOARD} aria-label=\"Dashboard\">\r\n                  <svg\r\n                    className=\"w-8 mr-6 text-black-light cursor-pointer\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    fill=\"none\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    stroke=\"currentColor\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2}\r\n                      d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\"\r\n                    />\r\n                  </svg>\r\n                </Link>\r\n\r\n                <button\r\n                  type=\"button\"\r\n                  title=\"Sign Out\"\r\n                  onClick={() => {\r\n                    firebase.auth().signOut();\r\n                    history.push(ROUTES.LOGIN);\r\n                  }}\r\n                  onKeyDown={(event) => {\r\n                    if (event.key === 'Enter') {\r\n                      firebase.auth().signOut();\r\n                      history.push(ROUTES.LOGIN);\r\n                    }\r\n                  }}\r\n                >\r\n                  <svg\r\n                    className=\"w-8 mr-6 text-black-light cursor-pointer\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    fill=\"none\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    stroke=\"currentColor\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2}\r\n                      d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"\r\n                    />\r\n                  </svg>\r\n                </button>\r\n                {user && (\r\n                  <div className=\"flex items-center cursor-pointer\">\r\n                    <Link to={`/p/${user?.username}`}>\r\n                      <img\r\n                        className=\"rounded-full h-8 w-8 flex\"\r\n                        src={`./images/avatars/${user?.username}.jpg`}\r\n                        alt={`${user?.username} profile`}\r\n                        onError={(e) => {\r\n                          e.target.src = DEFAULT_IMAGE_PATH;\r\n                        }}\r\n                      />\r\n                    </Link>\r\n                  </div>\r\n                )}\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Link to={ROUTES.LOGIN}>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"bg-blue-medium font-bold text-sm rounded text-white w-20 h-8\"\r\n                  >\r\n                    Log In\r\n                  </button>\r\n                </Link>\r\n                <Link to={ROUTES.SIGN_UP}>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"font-bold text-sm rounded text-blue-medium w-20 h-8\"\r\n                  >\r\n                    Sign Up\r\n                  </button>\r\n                </Link>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n","/* eslint-disable */\r\nimport {Link, useHistory} from 'react-router-dom'\r\n\r\nexport default function ProfileList({profile, handleRemove, setOpen, open, text}){\r\n\r\n    const username = profile.username;\r\n    // console.log(profile.docId)\r\n    let history = useHistory()\r\n    const handleClick = (e, to) => {\r\n        \r\n        e.preventDefault();\r\n        setOpen(false);\r\n        setTimeout(()=> history.push(to), 500)\r\n    }\r\n\r\n    return(\r\n    <div className=\"flex flex-row items-center align-items justify-between\">\r\n        <div className=\"flex items-center justify-between\">\r\n            <img\r\n                className=\"rounded-full w-8 flex mr-3\"\r\n                src={`./images/avatars/${username}.jpg`}\r\n                alt=\"\"\r\n                onError={(e) => {\r\n                    e.target.src = `./images/avatars/default.png`;\r\n                }}\r\n            />\r\n            <Link onClick={(e) => handleClick(e, `/p/${username}`)} to={`/p/${username}`}>\r\n                <p className=\"font-bold text-sm\">{username}</p>\r\n            </Link>\r\n        </div>\r\n        <button\r\n            className=\"text-xs font-bold text-blue-medium\"\r\n            type=\"button\"\r\n            onClick={() => handleRemove(profile.docId, profile.userId)}\r\n        >\r\n            {text}\r\n        </button>\r\n    </div>\r\n)}","/* eslint-disable react/prop-types */\r\n/* eslint-disable */\r\nimport { Fragment, useEffect, useState } from 'react'\r\nimport { Dialog, Transition } from '@headlessui/react'\r\nimport { XMarkIcon } from '@heroicons/react/24/outline'\r\nimport ProfileList from './profilelist'\r\n\r\n\r\nexport default function OverLay({open, setOpen, data, title, handleUnFollowUser, \r\n  handleRemoveFollowers}) {\r\n//   const [open, setOpen] = useState(false)\r\n\r\n\r\nlet profiles = null;\r\nlet handleClick;\r\nlet text;\r\nif(title == \"Followers\"){\r\n    handleClick = handleRemoveFollowers;\r\n    text = \"Remove\";\r\n}\r\n\r\nif(title == \"Following\"){\r\n    handleClick = handleUnFollowUser;\r\n    text = \"Unfollow\";\r\n}\r\n\r\nif (data && data !== null){\r\n    profiles = data.map((profile)=>{\r\n    return (<div className=\"relative mt-2 flex-1 px-4 sm:px-10\">\r\n            <ProfileList handleRemove={handleClick} setOpen={setOpen} profile={profile} text={text}/>\r\n            </div>\r\n    )\r\n})}\r\n\r\nuseEffect(()=>{\r\n    \r\n\r\n},[data])\r\n\r\n\r\n// let username = data?.[0];\r\n\r\n\r\n  return (\r\n    <Transition.Root show={open? open:false} as={Fragment}>\r\n      <Dialog as=\"div\" className=\"relative z-10\" onClose={() => setOpen(!open)}>\r\n        <Transition.Child\r\n          as={Fragment}\r\n          enter=\"ease-in-out duration-500\"\r\n          enterFrom=\"opacity-0\"\r\n          enterTo=\"opacity-100\"\r\n          leave=\"ease-in-out duration-500\"\r\n          leaveFrom=\"opacity-100\"\r\n          leaveTo=\"opacity-0\"\r\n        >\r\n          <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" />\r\n        </Transition.Child>\r\n\r\n        <div className=\"fixed inset-0 overflow-hidden\">\r\n          <div className=\"absolute inset-0 overflow-hidden\">\r\n            <div className=\"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10\">\r\n              <Transition.Child\r\n                as={Fragment}\r\n                enter=\"transform transition ease-in-out duration-500 sm:duration-700\"\r\n                enterFrom=\"translate-x-full\"\r\n                enterTo=\"translate-x-0\"\r\n                leave=\"transform transition ease-in-out duration-500 sm:duration-700\"\r\n                leaveFrom=\"translate-x-0\"\r\n                leaveTo=\"translate-x-full\"\r\n              >\r\n                <Dialog.Panel className=\"pointer-events-auto relative w-screen max-w-md\">\r\n                  <Transition.Child\r\n                    as={Fragment}\r\n                    enter=\"ease-in-out duration-500\"\r\n                    enterFrom=\"opacity-0\"\r\n                    enterTo=\"opacity-100\"\r\n                    leave=\"ease-in-out duration-500\"\r\n                    leaveFrom=\"opacity-100\"\r\n                    leaveTo=\"opacity-0\"\r\n                  >\r\n                    <div className=\"absolute left-0 top-0 -ml-8 flex pr-2 pt-4 sm:-ml-10 sm:pr-4\">\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"relative rounded-md text-gray-300 hover:text-white focus:outline-none focus:ring-2 focus:ring-white\"\r\n                        onClick={() => setOpen(!open)}\r\n                      >\r\n                        <span className=\"absolute -inset-2.5\" />\r\n                        <span className=\"sr-only\">Close panel</span>\r\n                        <XMarkIcon className=\"h-6 w-6\" aria-hidden=\"true\" />\r\n                      </button>\r\n                    </div>\r\n                  </Transition.Child>\r\n                  <div className=\"flex h-full flex-col overflow-y-scroll bg-white py-6 shadow-xl\">\r\n                    <div className=\"px-4 sm:px-6\">\r\n                      <Dialog.Title className=\"text-base font-semibold leading-6 text-gray-900\">\r\n                        {title}\r\n                      </Dialog.Title>\r\n                    </div>\r\n                    <div className=\"mt-4 grid gap-5\">\r\n                            {profiles}\r\n                    </div>\r\n                  </div>\r\n                </Dialog.Panel>\r\n              </Transition.Child>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Dialog>\r\n    </Transition.Root>\r\n  )\r\n}","/* eslint-disable jsx-a11y/img-redundant-alt */\r\n/* eslint-disable */\r\nimport { useState, useEffect, useContext } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Skeleton from 'react-loading-skeleton';\r\nimport useUser from '../../hooks/use-user';\r\nimport { isUserFollowingProfile, toggleFollow, getUserByUserId } from '../../services/firebase';\r\nimport UserContext from '../../context/user';\r\nimport { DEFAULT_IMAGE_PATH } from '../../constants/paths';\r\nimport OverLay from '../overlay';\r\nimport { updateFollowedUserFollowers, updateLoggedInUserFollowing } from '../../services/firebase';\r\nimport LoggedInUserContext from '../../context/logged-in-user';\r\n\r\nexport default function Header({\r\n  photosCount,\r\n  followerCount,\r\n  setFollowerCount,\r\n  followingCount,\r\n  setFollowingCount,\r\n  profile: {\r\n    docId: profileDocId,\r\n    userId: profileUserId,\r\n    fullName,\r\n    followers,\r\n    following,\r\n    username: profileUsername\r\n  },\r\n  setProfile,\r\n}) {\r\n\r\n\r\n  // const [unFollowed, setUnFollowed] = useState(false);\r\n  const { setUser } = useContext(LoggedInUserContext);\r\n  const { user: loggedInUser } = useContext(UserContext);\r\n  let { user } = useUser(loggedInUser?.uid);\r\n  const [isFollowingProfile, setIsFollowingProfile] = useState(null);\r\n  const activeBtnFollow = user?.username && user?.username !== profileUsername;\r\n  const [unFollowed, setUnFollowed] = useState(false);\r\n  const [openOverLay, setOpenOverLay] = useState(false);\r\n  const [overLayData, setOverLayData] = useState(null)\r\n  \r\n\r\n\r\n  async function handleUnFollowUser(profileDocId, profileId) {\r\n    setUnFollowed(true);\r\n    await updateLoggedInUserFollowing(user.docId, profileId, true);\r\n    await updateFollowedUserFollowers(profileDocId, user.userId, true);\r\n    setOpenOverLay(true)\r\n    const [userUpdated] = await getUserByUserId(user.userId);\r\n    setProfile({ profile: userUpdated })\r\n    // setUser(userUpdated)\r\n    following = userUpdated.following;\r\n    setFollowingCount({ followingCount: followingCount - 1 })\r\n    getProfiles(following, \"Following\")\r\n    // setUser(null);\r\n\r\n  }\r\n\r\n\r\n\r\n  // console.log(following)\r\n  async function handleRemoveFollowers(profileDocId, profileId) {\r\n    // setUnFollowed(true);\r\n    await updateLoggedInUserFollowing(profileDocId, user.userId, true);\r\n    await updateFollowedUserFollowers(user.docId, profileId, true);\r\n    await getProfiles(followers, \"Followers\")\r\n    // const [user22] = await getUserByUserId(user.userId);\r\n    // setUnFollowed(true);\r\n    setOpenOverLay(true)\r\n    const [userUpdated] = await getUserByUserId(user.userId);\r\n    setProfile({ profile: userUpdated })\r\n    // setUser(userUpdated)\r\n    let followersUpdated = userUpdated.followers;\r\n    setFollowerCount({ followerCount: followerCount - 1 })\r\n    getProfiles(followersUpdated, \"Followers\")\r\n  }\r\n\r\n  // let followersUserIds;\r\n  let getProfiles = async (userIds, title) => {\r\n\r\n    let profiles = await Promise.all(userIds.map(async (id) => {\r\n      let profile = await getUserByUserId(id)\r\n\r\n      return profile[0]\r\n    }))\r\n\r\n    // console.log(followersUserIds)\r\n    setOverLayData({ title: title })\r\n    setOverLayData((old) => { return { ...old, data: profiles } });\r\n\r\n\r\n    // return followersUserIds\r\n\r\n  }\r\n\r\n\r\n\r\n  //  getFollowersUserIds()\r\n  //   console.log(overLayData)\r\n\r\n  const handleOnClick = (userIds, title) => {\r\n    // console.log(userIds)\r\n    if (userIds) {\r\n      getProfiles(userIds, title);\r\n    }\r\n    setOpenOverLay(true)\r\n  }\r\n\r\n  const handleToggleFollow = async () => {\r\n    setIsFollowingProfile((isFollowingProfile) => !isFollowingProfile);\r\n    setFollowerCount({\r\n      followerCount: isFollowingProfile ? followerCount - 1 : followerCount + 1\r\n    });\r\n    await toggleFollow(isFollowingProfile, user.docId, profileDocId, profileUserId, user.userId);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const isLoggedInUserFollowingProfile = async () => {\r\n      const isFollowing = await isUserFollowingProfile(user.username, profileUserId);\r\n      setIsFollowingProfile(!!isFollowing);\r\n    };\r\n\r\n    if (user?.username && profileUserId) {\r\n      isLoggedInUserFollowingProfile();\r\n    }\r\n\r\n\r\n    \r\n    \r\n\r\n\r\n  }, [user?.username, profileUserId]);\r\n\r\n  let cursor = '';\r\n  if (user?.userId === profileUserId){\r\n    cursor = 'pointer'\r\n  }\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-3 gap-4 justify-between mx-auto max-w-screen-lg\">\r\n      <div className=\"container flex justify-center items-center\">\r\n        {profileUsername ? (\r\n          <img\r\n            className=\"rounded-full h-40 w-40 flex\"\r\n            alt={`${fullName} profile picture`}\r\n            src={`./images/avatars/${profileUsername}.jpg`}\r\n            onError={(e) => {\r\n              e.target.src = DEFAULT_IMAGE_PATH;\r\n            }}\r\n          />\r\n        ) : (\r\n          <Skeleton circle height={150} width={150} count={1} />\r\n        )}\r\n      </div>\r\n      <div className=\"flex items-center justify-center flex-col col-span-2\">\r\n        <div className=\"container flex items-center\">\r\n          <p className=\"text-2xl mr-4\">{profileUsername}</p>\r\n          {activeBtnFollow && isFollowingProfile === null ? (\r\n            <Skeleton count={1} width={80} height={32} />\r\n          ) : (\r\n            activeBtnFollow && (\r\n              <button\r\n                className=\"bg-blue-medium font-bold text-sm rounded text-white w-20 h-8\"\r\n                type=\"button\"\r\n                onClick={handleToggleFollow}\r\n                onKeyDown={(event) => {\r\n                  if (event.key === 'Enter') {\r\n                    handleToggleFollow();\r\n                  }\r\n                }}\r\n              >\r\n                {isFollowingProfile ? 'Unfollow' : 'Follow'}\r\n              </button>\r\n            )\r\n          )}\r\n        </div>\r\n        <div className=\"container flex mt-4\">\r\n          {!followers || !following ? (\r\n            <Skeleton count={1} width={677} height={24} />\r\n          ) : (\r\n            <>\r\n              <p className=\"mr-10\" style={{userSelect:\"none\" }}>\r\n                <span className=\"font-bold\">{photosCount}</span> {photosCount === 1 ? `photo` : `photos`}\r\n              </p>\r\n              <p style={{ cursor: cursor, userSelect:\"none\" }} onClick={() => handleOnClick(followers, \"Followers\")} className=\"mr-10\">\r\n                <span className=\"font-bold\">{followerCount}</span>\r\n                {` `}\r\n                {followerCount === 1 ? `follower` : `followers`}\r\n              </p>\r\n              <p style={{ cursor: cursor, userSelect:\"none\" }} onClick={() => handleOnClick(following, \"Following\")} className=\"mr-10\">\r\n                <span className=\"font-bold\">{following?.length}</span> following\r\n              </p>\r\n            </>\r\n          )}\r\n        </div>\r\n        <div className=\"container mt-4\">\r\n          {user?.userId === profileUserId ? <OverLay\r\n            open={openOverLay}\r\n            setOpen={setOpenOverLay}\r\n            data={overLayData?.data}\r\n            title={overLayData?.title}\r\n            handleUnFollowUser={handleUnFollowUser}\r\n            handleRemoveFollowers={handleRemoveFollowers}\r\n          />\r\n            : null\r\n          }\r\n\r\n          <p className=\"font-medium\">{!fullName ? <Skeleton count={1} height={24} /> : fullName}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nHeader.propTypes = {\r\n  photosCount: PropTypes.number.isRequired,\r\n  followerCount: PropTypes.number.isRequired,\r\n  setFollowerCount: PropTypes.func.isRequired,\r\n  profile: PropTypes.shape({\r\n    docId: PropTypes.string,\r\n    userId: PropTypes.string,\r\n    fullName: PropTypes.string,\r\n    username: PropTypes.string,\r\n    followers: PropTypes.array,\r\n    following: PropTypes.array\r\n  }).isRequired\r\n};\r\n","/* eslint-disable no-nested-ternary */\r\nimport PropTypes from 'prop-types';\r\nimport Skeleton from 'react-loading-skeleton';\r\n\r\nexport default function Photos({ photos }) {\r\n  return (\r\n    <div className=\"h-16 border-t border-gray-primary mt-12 pt-4\">\r\n      <div className=\"grid grid-cols-3 gap-8 mt-4 mb-12\">\r\n        {!photos\r\n          ? new Array(12).fill(0).map((_, i) => <Skeleton key={i} width={320} height={400} />)\r\n          : photos.length > 0\r\n          ? photos.map((photo) => (\r\n              <div key={photo.docId} className=\"relative group\">\r\n                <img src={photo.imageSrc} alt={photo.caption} />\r\n\r\n                <div className=\"absolute bottom-0 left-0 bg-gray-200 z-10 w-full justify-evenly items-center h-full bg-black-faded group-hover:flex hidden\">\r\n                  <p className=\"flex items-center text-white font-bold\">\r\n                    <svg\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                      viewBox=\"0 0 20 20\"\r\n                      fill=\"currentColor\"\r\n                      className=\"w-8 mr-4\"\r\n                    >\r\n                      <path\r\n                        fillRule=\"evenodd\"\r\n                        d=\"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z\"\r\n                        clipRule=\"evenodd\"\r\n                      />\r\n                    </svg>\r\n                    {photo.likes.length}\r\n                  </p>\r\n\r\n                  <p className=\"flex items-center text-white font-bold\">\r\n                    <svg\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                      viewBox=\"0 0 20 20\"\r\n                      fill=\"currentColor\"\r\n                      className=\"w-8 mr-4\"\r\n                    >\r\n                      <path\r\n                        fillRule=\"evenodd\"\r\n                        d=\"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z\"\r\n                        clipRule=\"evenodd\"\r\n                      />\r\n                    </svg>\r\n                    {photo.comments.length}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            ))\r\n          : null}\r\n      </div>\r\n\r\n      {!photos || (photos.length === 0 && <p className=\"text-center text-2xl\">No Posts Yet</p>)}\r\n    </div>\r\n  );\r\n}\r\n\r\nPhotos.propTypes = {\r\n  photos: PropTypes.array\r\n};\r\n","import { useReducer, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Header from './header';\r\nimport Photos from './photos';\r\nimport { getUserPhotosByUserId } from '../../services/firebase';\r\n\r\nexport default function Profile({ user }) {\r\n  const reducer = (state, newState) => ({ ...state, ...newState });\r\n  const initialState = {\r\n    profile: {},\r\n    photosCollection: null,\r\n    followerCount: 0,\r\n    followingCount: 0\r\n  };\r\n\r\n  const [{ profile, photosCollection, followerCount, followingCount }, dispatch] = useReducer(\r\n    reducer,\r\n    initialState\r\n  );\r\n\r\n  useEffect(() => {\r\n    async function getProfileInfoAndPhotos() {\r\n      const photos = await getUserPhotosByUserId(user.userId);\r\n      dispatch({ profile: user, photosCollection: photos, followerCount: user.followers.length, followingCount: user.following.length });\r\n    }\r\n    getProfileInfoAndPhotos();\r\n  }, [user.username]);\r\n\r\n  return (\r\n    <>\r\n      <Header\r\n        photosCount={photosCollection ? photosCollection.length : 0}\r\n        profile={profile}\r\n        setProfile={dispatch}\r\n        followerCount={followerCount}\r\n        setFollowerCount={dispatch}\r\n        followingCount={followingCount}\r\n        setFollowingCount={dispatch}\r\n      />\r\n      <Photos photos={photosCollection} />\r\n    </>\r\n  );\r\n}\r\n\r\nProfile.propTypes = {\r\n  user: PropTypes.shape({\r\n    dateCreated: PropTypes.number,\r\n    emailAddress: PropTypes.string,\r\n    followers: PropTypes.array,\r\n    following: PropTypes.array,\r\n    fullName: PropTypes.string,\r\n    userId: PropTypes.string,\r\n    username: PropTypes.string\r\n  })\r\n};\r\n","/* eslint-disable */\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport { useState, useEffect } from 'react';\r\nimport { getUserByUsername } from '../services/firebase';\r\nimport * as ROUTES from '../constants/routes';\r\nimport Header from '../components/header';\r\nimport UserProfile from '../components/profile';\r\nimport OverLay from '../components/overlay';\r\nimport LoggedInUserContext from '../context/logged-in-user';\r\n\r\nexport default function Profile({loggedInUser}) {\r\n  // console.log(loggedInUser)\r\n  const { username } = useParams();\r\n  const [user, setUser] = useState(null);\r\n  // const [loggedInUser1, setLoggedInUser1] = useState(loggedInUser)\r\n  const history = useHistory();\r\n  // const { user, setActiveUser } = useUser(null);\r\n\r\n  useEffect(() => {\r\n    async function checkUserExists() {\r\n      const [user] = await getUserByUsername(username);\r\n      if (user?.userId) {\r\n        setUser(user);\r\n      } else {\r\n        history.push(ROUTES.NOT_FOUND);\r\n      }\r\n    }\r\n\r\n    checkUserExists();\r\n  }, [username, history]);\r\n\r\n  console.log(user)\r\n  console.log(user?.userId)\r\n  console.log(loggedInUser)\r\n  console.log(loggedInUser?.uid === user?.userId)\r\n  return user?.username ? (\r\n    <LoggedInUserContext.Provider value={{ user, setUser }}>\r\n      <div className=\"bg-gray-background\">\r\n        <Header />\r\n        {/* {user?.userId === loggedInUser?.uid ? (<OverLay />) : null} */}\r\n        <div className=\"mx-auto max-w-screen-lg\">\r\n          <UserProfile  user={user}/>\r\n        </div>\r\n      </div>\r\n    </LoggedInUserContext.Provider>\r\n  ) : null;\r\n}\r\n"],"sourceRoot":""}